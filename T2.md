# 最大土地面积

### 题目描述

在某块平面土地上有N个点，你可以选择其中的任意四个点，将这片土地围起来，当然，你希望这四个点围成的多边形面积最大。

### 输入输出格式

####输入格式：

第1行一个正整数N，接下来N行，每行2个数x,y，表示该点的横坐标和纵坐标。

####输出格式：

最大的多边形面积，答案精确到小数点后3位。

### 输入输出样例

#### 输入样例#1：

> 5
> 0 0
> 1 0
> 1 1
> 0 1
> 0.5 0.5

####输出样例#1：

> 1.000

## 说明

数据范围$n\le 2000$，$|x|,|y|\le 100000$。

## 题解

首先想到的当然是$n^4$大力枚举所有点，20分。

考虑优化，发现我们可以枚举一条边，再以该边为对角线求出左右两边的三角形最大值（我的方法是用叉积求出有向面积，找出最大值与最小值，减一下即可）30分。

考虑继续优化，我们发现四边形的四个顶点一定在凸包上，所以求先求凸包再枚举，50分。

五十分核心代码大致如下：

```cpp
#define area2(A, B, C) cross(A - C, B - C)
double ans = 0.;
for(int i = 1; i <= m; ++i)
{
	for(int j = 1; j < i; ++j)
	{
		minn = inf;
		maxx = -inf;
		for(int k = 1; k <= m; ++k)
		{
			if(i == k || j == k)
				continue;
			double area = area2(P[sta[i]], P[sta[j]], P[sta[k]]);
			minn = min(minn, area);
			maxx = max(maxx, area);
		}
		if(minn < 0. && maxx > 0.)
			ans = max(maxx - minn, ans);
	}
}
```

我们又能发现对于一条边，如果它在凸包上且作为对角线，我们发现凸包上的一侧的点到该线段的距离是一个凸函数，所以我们考虑三分，复杂度$O(n^2\log n)$，听说卡一下常能过。

综上，我们发现我们整理已经整理出了一些性质，虽然都非常显而易见，但我们还没有把它们结合起来。

首先，凸包是肯定要求的。

受到之前的启发，我们仍然考虑枚举一条对角线，设现在枚举到的顶点为$i, j$。

设另两个点为$a, b$。

![](https://github.com/pfypfypfy/images-in-blogs/blob/master/20180629002.png?raw=true)

